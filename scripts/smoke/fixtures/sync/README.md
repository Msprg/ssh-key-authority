# Sync Preview Fixtures

This directory stores normalized snapshots of `scripts/sync.php --preview` output used by the smoke harness.

## Naming

Default fixture path generated by the harness:

- `server-<SERVER_ID>.txt`
- `server-<SERVER_ID>-user-<USERNAME>.txt` (when `SKA_SMOKE_SYNC_USERNAME` is set)

## Record a fixture

Run:

```bash
SKA_SMOKE_SYNC_SERVER_ID=<id> scripts/smoke/sync-preview.sh --record
```

Or through the orchestrator:

```bash
SKA_SMOKE_SYNC_SERVER_ID=<id> scripts/smoke/run.sh --sync-only --record-sync
```

## Compare against fixture

Run:

```bash
SKA_SMOKE_SYNC_SERVER_ID=<id> scripts/smoke/sync-preview.sh
```

The harness strips timestamps and ANSI colors before comparison, then fails on any diff.
